<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game HÃ¹ng VIP</title>
<style>
body{
  margin:0;
  font-family:sans-serif;
  background: linear-gradient(135deg,#ff8ac6,#ffb3d9,#ffe6f2);
  overflow:hidden;
}

/* LOGIN BOX */
#intro{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  background:rgba(255,255,255,0.35);
  padding:25px;
  width:300px;
  text-align:center;
  border-radius:20px;
  box-shadow:0 0 15px rgba(0,0,0,0.2);
  animation:shake 3s infinite ease-in-out;
}
@keyframes shake{
  0%{transform:translate(-50%,-50%) rotate(0deg);}
  50%{transform:translate(-50%,-50%) rotate(1deg);}
  100%{transform:translate(-50%,-50%) rotate(0deg);}
}

#playerName{ width:90%; padding:10px; border-radius:10px; border:2px solid #ff4d94; }

/* GAME FRAME */
#gameDiv{
  display:none;
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  width:350px; height:500px;
  background:white;
  border-radius:20px;
  overflow:hidden;
  border:5px solid #ff4da6; /* viá»n Ä‘áº­m */
}

/* BOTTOM BAR */
#bottomBar{
  display:none;
  position:absolute;
  top:calc(50% + 270px);
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:10px 20px;
  border-radius:12px;
  border:3px solid #ff4da6;
  font-size:18px;
}

/* ICON */
.icon{
  position:absolute;
  font-size:2.5em;
  user-select:none;
  cursor:pointer;
  transition:0.2s;
}

/* RED LINE LOSS AREA */
#deadLine{
  position:absolute;
  bottom:0;
  width:100%;
  height:5px;
  background:red;
}

/* READY POPUP */
#readyPopup{
  display:none;
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:white;
  padding:25px;
  border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  z-index:20;
  text-align:center;
}

/* SHOP BUTTON */
#shopBtn, #exchangeBtn, #rulesBtn{
  display:none;
  position:absolute;
  right:15px;
  padding:10px 15px;
  border:none;
  border-radius:10px;
  background:#ff4d94;
  color:white;
  cursor:pointer;
}
#shopBtn{ top:20px; }
#rulesBtn{ top:70px; }
#exchangeBtn{ top:120px; }

/* MODALS */
.modal{
  display:none;
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:white;
  padding:20px;
  border-radius:12px;
  width:300px;
  box-shadow:0 0 20px rgba(0,0,0,0.5);
  z-index:30;
}

/* BY HUNG */
#byHung{
  position:absolute;
  bottom:10px; left:10px;
  color:white;
  font-weight:bold;
  font-size:20px;
  animation:fall 3s infinite;
}
@keyframes fall{
  0%{transform:translateY(0);}
  50%{transform:translateY(10px);}
  100%{transform:translateY(0);}
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="intro">
  <h2>Nháº¥p vÃ´ lÃ  cÃ³ xiá»n ğŸ¤‘</h2>
  <input id="playerName" placeholder="Nháº­p tÃªn...">
  <br><br>
  <button onclick="login()">Báº¯t Ä‘áº§u</button>

  <h3>ğŸ“œ Thá»ƒ Lá»‡</h3>
  <div style="text-align:left;font-size:14px;">
    âš¡ +10 Ä‘iá»ƒm <br>
    â¤ï¸ +1 Ä‘iá»ƒm <br>
    ğŸ’ +2 Ä‘iá»ƒm <br>
    ğŸ€ +5 Ä‘iá»ƒm <br>
    ğŸ +3 Ä‘iá»ƒm <br>
    ğŸŒ Báº¥m vÃ o â†’ trá»« 1â€“200 Ä‘iá»ƒm (khÃ´ng báº¥m thÃ¬ khÃ´ng sao) <br><br>
    ğŸ”¥ Icon rÆ¡i xuá»‘ng thanh Ä‘á» â†’ Máº¥t mÃ¡u <br>
    â­ Thanh Ä‘á» = â€œváº¡ch tá»­ tháº§nâ€ á»Ÿ cuá»‘i khung game <br>
    â¤ï¸ Báº¡n cÃ³ 10 máº¡ng <br>
    ğŸ’° Äá»•i Ä‘iá»ƒm láº¥y tiá»n trong shop <br>
  </div>
</div>

<!-- GAME FRAME -->
<div id="gameDiv">
  <div id="deadLine"></div>
</div>

<!-- BOTTOM SCORE + HEALTH -->
<div id="bottomBar">
  <span id="scoreTxt">Äiá»ƒm: 0</span> &nbsp;|&nbsp;
  <span id="healthTxt">MÃ¡u: 10</span>
</div>

<!-- BUTTONS -->
<button id="shopBtn" onclick="openShop()">ğŸ›’ Shop</button>
<button id="rulesBtn" onclick="openRules()">â” Thá»ƒ lá»‡</button>
<button id="exchangeBtn" onclick="openExchange()">ğŸ’° Äá»•i Ä‘iá»ƒm</button>

<!-- READY POPUP -->
<div id="readyPopup">
  <h2>Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? ğŸ¤©</h2>
  <button onclick="startGame()">Báº¯t Ä‘áº§u!</button>
</div>

<!-- SHOP MODAL -->
<div id="shopModal" class="modal">
  <h3>Shop</h3>
  <p>Chá»n pháº§n thÆ°á»Ÿng:</p>
  <button onclick="exchange(1500,'10k')">1500 Ä‘iá»ƒm â†’ 10k</button><br><br>
  <button onclick="exchange(3000,'20k')">3000 Ä‘iá»ƒm â†’ 20k</button><br><br>
  <button onclick="closeShop()">ÄÃ³ng</button>
</div>

<!-- EXCHANGE RESULT -->
<div id="exchangeModal" class="modal">
  <p id="exchangeMsg"></p>
  <button onclick="closeExchange()">OK</button>
</div>

<!-- RULES MODAL -->
<div id="rulesModal" class="modal">
  <h3>Thá»ƒ lá»‡</h3>
  <p>
    Icon rÆ¡i â†’ báº¥m Ä‘á»ƒ nháº­n Ä‘iá»ƒm.<br>
    Icon rÆ¡i xuá»‘ng thanh Ä‘á» â†’ máº¥t mÃ¡u.<br>
    ğŸŒ chá»‰ trá»« Ä‘iá»ƒm khi Báº¤M.<br>
  </p>
  <button onclick="closeRules()">ÄÃ³ng</button>
</div>

<!-- BY HUNG -->
<div id="byHung">by HÃ¹ng ğŸ’–</div>

<script>
let playerName="";
let score=0;
let health=10;
let maxHealth=10;
let gameRunning=false;

/* LOGIN */
function login(){
  playerName=document.getElementById("playerName").value.trim();
  if(!playerName) return;

  intro.style.display="none";

  // Hiá»‡n popup ready
  readyPopup.style.display="block";
}

/* START GAME */
function startGame(){
  readyPopup.style.display="none";
  gameDiv.style.display="block";
  bottomBar.style.display="block";

  shopBtn.style.display="block";
  rulesBtn.style.display="block";
  exchangeBtn.style.display="block";

  gameRunning=true;
  spawnLoop();
}

/* ICON SPAWNING */
function spawnLoop(){
  if(!gameRunning) return;
  spawnIcon();
  setTimeout(spawnLoop,700); // xuáº¥t icon nhiá»u nhÆ°ng vá»«a
}

function spawnIcon(){
  if(!gameRunning) return;

  const icons=["âš¡","â¤ï¸","ğŸ’","ğŸ€","ğŸ","ğŸŒ"];
  const el=document.createElement("div");
  el.className="icon";
  el.textContent=icons[Math.floor(Math.random()*icons.length)];
  el.style.left=Math.random()*300+"px";
  el.style.top="0px";
  gameDiv.appendChild(el);

  el.onclick=()=>clickIcon(el);

  let speed=Math.random()*2+1; // rÆ¡i vá»«a
  let fall=setInterval(()=>{
    if(!gameRunning){ clearInterval(fall); return; }

    let y=parseFloat(el.style.top);
    y+=speed;
    el.style.top=y+"px";

    if(y>=480){
      if(el.textContent!=="ğŸŒ"){
        health--;
        updateHUD();
      }
      clearInterval(fall);
      el.remove();
      if(health<=0) lose();
    }
  },20);
}

/* CLICK ICON */
function clickIcon(el){
  let t=el.textContent;

  if(t==="âš¡") score+=10;
  if(t==="â¤ï¸") score+=1;
  if(t==="ğŸ’") score+=2;
  if(t==="ğŸ€") score+=5;
  if(t==="ğŸ") score+=3;

  if(t==="ğŸŒ"){
    let minus=Math.floor(Math.random()*200)+1;
    score-=minus;
  }

  updateHUD();
  el.remove();
}

/* UPDATE TEXT */
function updateHUD(){
  scoreTxt.textContent="Äiá»ƒm: "+score;
  healthTxt.textContent="MÃ¡u: "+health;
}

/* LOSE */
function lose(){
  gameRunning=false;
  alert("ğŸ’€ Thua rá»“i! Báº¥m OK chÆ¡i láº¡i");
  health=maxHealth;
  updateHUD();
  gameRunning=true;
}

/* SHOP */
function openShop(){
  gameRunning=false;
  shopModal.style.display="block";
}
function closeShop(){
  gameRunning=true;
  shopModal.style.display="none";
}

/* EXCHANGE */
function exchange(cost, reward){
  if(score>=cost){
    exchangeMsg.textContent="ğŸ“¸ Cap mÃ n hÃ¬nh gá»­i cho HÃ¹ng Ä‘á»ƒ nháº­n "+reward+" ğŸ’°";
  } else {
    exchangeMsg.textContent="Xin lá»—i, chÆ°a Ä‘á»§ Ä‘iá»ƒm ğŸ¥¹ (cáº§n "+cost+")";
  }
  exchangeModal.style.display="block";
}
function openExchange(){ openShop(); }
function closeExchange(){
  exchangeModal.style.display="none";
}

/* RULES */
function openRules(){
  gameRunning=false;
  rulesModal.style.display="block";
}
function closeRules(){
  rulesModal.style.display="none";
  gameRunning=true;
}
</script>
</body>
  </html>
