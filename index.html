<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game cá»§a HÃ¹ng</title>
<style>

body {
    margin: 0;
    font-family: Arial;
    background: #ffb6db;
}

/* LOGIN */
.login-screen {
    position: fixed;
    inset: 0;
    background: #ffb6db;
    display: flex;
    justify-content: center;
    align-items: center;
}

.loginBox {
    background: white;
    padding: 30px;
    width: 300px;
    border-radius: 18px;
    box-shadow: 0 0 15px rgba(0,0,0,0.25);
    animation: shake 3s infinite ease-in-out;
    text-align: center;
}

@keyframes shake {
    0% { transform: translateX(0); }
    50% { transform: translateX(6px); }
    100% { transform: translateX(0); }
}

.loginBox input {
    width:100%;
    padding:10px;
    margin:10px 0;
    border-radius:10px;
    border:1px solid #aaa;
    font-size: 16px;
}

.loginBox button {
    width:100%;
    padding:10px;
    border-radius:10px;
    background:#ff4fa5;
    color:white;
    font-size:17px;
    font-weight:bold;
    cursor:pointer;
    border:none;
}

.byhung {
    margin-top: 15px;
    font-size: 14px;
    color:#ff3b92;
}

/* NÃšT THá»‚ Lá»† */
.rules-btn {
  margin-top: 12px;
  background: #ff6fa8;
  color: white;
  padding: 10px 16px;
  border-radius: 12px;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
  border:none;
}

/* POPUP THá»‚ Lá»† */
.rules-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(3px);
  justify-content: center;
  align-items: center;
}

.rules-content {
  background: #fff;
  padding: 20px;
  width: 280px;
  border-radius: 18px;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
  animation: pop .25s ease;
}

@keyframes pop {
  from { transform: scale(0.8); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

.close-btn {
  width: 100%;
  padding: 10px;
  margin-top: 15px;
  background: #ff5f9e;
  color: white;
  border-radius: 10px;
  font-weight:bold;
  cursor: pointer;
  border:none;
}

/* GAME */
.game-screen {
    display:none;
    padding-top:20px;
    text-align:center;
}

#gameContainer {
    width: 300px;
    height: 420px;
    margin: 0 auto;
    border: 4px solid hotpink;
    border-radius: 20px;
    position: relative;
    overflow: hidden;
    background: #fff;
}

/* LINE Äá» */
#deathLine {
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    height:4px;
    background:red;
}

/* ICON */
.icon {
    position: absolute;
    top: -40px;
    font-size: 35px;
    cursor: pointer;
    user-select:none;
    transition: transform 0.1s;
}

.icon:hover {
    transform: scale(1.35);
}

/* DÆ¯á»šI KHUNG */
.bottomBar {
    margin-top: 12px;
    font-size: 20px;
    font-weight: bold;
}

/* SHOP */
.shop-btn {
    margin-top: 10px;
    background: #ff8dcf;
    padding: 10px 20px;
    border-radius: 12px;
    cursor:pointer;
    color:white;
    font-weight:bold;
    border:none;
}

.shop-modal {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.4);
    backdrop-filter:blur(2px);
    justify-content:center;
    align-items:center;
}

.shop-box {
    background:white;
    padding:20px;
    width:260px;
    border-radius:16px;
    text-align:center;
    animation: pop .25s ease;
}

.reward {
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:12px;
    background:#ffd6ef;
    font-weight:bold;
    cursor:pointer;
    border:none;
}

.close-shop {
    margin-top:10px;
    background:#ff5f9e;
    padding:10px;
    width:100%;
    color:white;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
    border:none;
}

</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen" class="login-screen">
    <div class="loginBox">
        <h1>Nháº¥p vÃ´ lÃ  cÃ³ xiá»n ğŸ¤‘</h1>
        <input id="playerName" type="text" placeholder="Nháº­p tÃªn..." />
        <button id="loginBtn">Báº¯t Ä‘áº§u</button>

        <!-- nÃºt thá»ƒ lá»‡ -->
        <button id="rulesBtn" class="rules-btn">â” Thá»ƒ lá»‡</button>

        <div class="byhung">by HÃ¹ng ğŸ’–</div>
    </div>
</div>

<!-- POPUP THá»‚ Lá»† -->
<div id="rulesModal" class="rules-modal">
    <div class="rules-content">
        <h2>ğŸ“œ Thá»ƒ lá»‡</h2>

        <p>âš¡ +10 Ä‘iá»ƒm</p>
        <p>â¤ï¸ +1 Ä‘iá»ƒm</p>
        <p>ğŸ’ +2 Ä‘iá»ƒm</p>
        <p>ğŸ€ +5 Ä‘iá»ƒm</p>
        <p>ğŸ +3 Ä‘iá»ƒm</p>
        <p>ğŸŒ Trá»« 1â€“200 Ä‘iá»ƒm khi Báº¤M (khÃ´ng báº¥m thÃ¬ khÃ´ng sao)</p>
        <p>ğŸ”» Icon cháº¡m thanh Ä‘á» â†’ máº¥t 1 mÃ¡u (trá»« ğŸŒ)</p>
        <p>ğŸ›’ Shop â†’ Ä‘á»•i Ä‘iá»ƒm láº¥y quÃ </p>

        <button id="closeRules" class="close-btn">ÄÃ³ng</button>
    </div>
</div>

<!-- GAME -->
<div id="gameScreen" class="game-screen">

    <div id="gameContainer">
        <div id="iconArea"></div>
        <div id="deathLine"></div>
    </div>

    <div class="bottomBar">
        <div id="scoreDisplay">Äiá»ƒm: 0</div>
        <div id="healthDisplay">MÃ¡u: â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</div>
    </div>

    <button id="shopBtn" class="shop-btn">ğŸ›’ Shop</button>

    <div id="shopModal" class="shop-modal">
        <div class="shop-box">
            <h2>ğŸ Äá»•i Ä‘iá»ƒm</h2>

            <button class="reward" data-cost="1500">1500 Ä‘iá»ƒm â†’ 10k</button>
            <button class="reward" data-cost="3000">3000 Ä‘iá»ƒm â†’ 20k</button>

            <button id="closeShop" class="close-shop">ÄÃ³ng</button>
        </div>
    </div>

</div>


<script>
let gameRunning = false;
let score = 0;
let health = 10;
let spawnSpeed = 850;
let inLogin = true;

const loginScreen = document.getElementById("loginScreen");
const gameScreen = document.getElementById("gameScreen");
const nameInput = document.getElementById("playerName");
const loginBtn = document.getElementById("loginBtn");

const scoreDisplay = document.getElementById("scoreDisplay");
const healthDisplay = document.getElementById("healthDisplay");
const iconArea = document.getElementById("iconArea");

function updateHealth() {
    let hearts = "";
    for (let i=0;i<health;i++) hearts += "â¤ï¸";
    healthDisplay.innerHTML = "MÃ¡u: " + hearts;
}

loginBtn.onclick = () => {
    if (!nameInput.value.trim()) return;

    inLogin = false;

    loginScreen.style.display = "none";
    gameScreen.style.display = "block";

    setTimeout(() => {
        alert("Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a?");
        gameRunning = true;
        spawnLoop();
    }, 200);
};

const icons = [
    { emoji:"âš¡", point:10 },
    { emoji:"â¤ï¸", point:1 },
    { emoji:"ğŸ’", point:2 },
    { emoji:"ğŸ€", point:5 },
    { emoji:"ğŸ", point:3 },
    { emoji:"ğŸŒ", point:"minus" }
];

function spawnIcon() {
    if (!gameRunning) return;

    const icon = document.createElement("div");
    icon.classList.add("icon");

    const pick = icons[Math.floor(Math.random()*icons.length)];
    icon.innerHTML = pick.emoji;

    icon.style.left = Math.random() * 240 + "px";

    icon.onclick = () => {
        if (pick.point === "minus") {
            let loss = Math.floor(Math.random()*200)+1;
            score -= loss;
        } else {
            score += pick.point;
        }
        scoreDisplay.innerText = "Äiá»ƒm: " + score;
        icon.remove();
    };

    iconArea.appendChild(icon);

    let fall = setInterval(() => {
        if (!gameRunning) return;

        let y = parseInt(icon.style.top || -40);
        icon.style.top = (y + 6) + "px";

        if (y > 360) {
            if (pick.point !== "minus") {
                health--;
                updateHealth();
            }
            icon.remove();
            clearInterval(fall);
        }

        if (health <= 0) {
            gameRunning = false;
            alert("ğŸ’€ Thua rá»“i!");
        }

    }, 28);
}

function spawnLoop() {
    spawnIcon();
    setTimeout(spawnLoop, spawnSpeed);
}

/* SHOP */
document.querySelectorAll(".reward").forEach(btn=>{
    btn.onclick = () => {
        let cost = Number(btn.dataset.cost);
        if (score >= cost) {
            alert("ğŸ“¸ Cap mÃ n hÃ¬nh vÃ  gá»­i cho HÃ¹ng ğŸ’–");
        } else {
            alert("ChÆ°a Ä‘á»§ Ä‘iá»ƒm ğŸ˜¢");
        }
    };
});

document.getElementById("shopBtn").onclick = () => {
    gameRunning = false;
    document.getElementById("shopModal").style.display = "flex";
};

document.getElementById("closeShop").onclick = () => {
    document.getElementById("shopModal").style.display = "none";
    gameRunning = true;
};

/* THá»‚ Lá»† */
document.getElementById("rulesBtn").onclick = () => {
    document.getElementById("rulesModal").style.display = "flex";
};

document.getElementById("closeRules").onclick = () => {
    document.getElementById("rulesModal").style.display = "none";
};
</script>

</body>
</html>
